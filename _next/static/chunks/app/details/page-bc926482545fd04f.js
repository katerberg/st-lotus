(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5549],{4148:function(e,n,r){Promise.resolve().then(r.bind(r,804))},804:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Details}});var t=r(5029),a=r(8965),i=r(4670),s=r(7437),o=r(3226),c=r(8874),l=r(1679),u=r(8991),d=r(2265),g=r(4922),f=r(1975),p=r(9078),h=r(9190),m=r(8305),x=r(7121),v=r(1619),Z=r(4033),j=r(2582),b=r(182),k=r(7760),C=r(1805),w=r(4275),y=r.n(w),S=r(9050),A=r(6687),R=r(44),I=r(8554),_=r(9222),D=r(3628),hooks_useCardPairings=function(e){var n=(0,i._)((0,d.useState)([]),2),r=n[0],t=n[1],a=(0,i._)((0,d.useState)(!1),2),s=a[0],o=a[1],c=(0,i._)((0,d.useState)(null),2),l=c[0],u=c[1],g=(0,d.useCallback)(function(e){return _.Z.get("".concat(D.v.API_SYNERGIES_URL).replace("{CARD_NAME}",encodeURIComponent(e)))},[]),f=(0,d.useMemo)(function(){return(0,I.Z)(g,300)},[g]);return(0,d.useEffect)(function(){(0,A._)(function(){var n,r,a,i,s;return(0,R.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,f(e.trim())];case 1:return n=c.sent().data,o(!0),n.statusCode?(t([]),u({knownCard:!0,suggestion:n.suggestion})):(t(n),u(null)),o(!1),[3,3];case 2:return(s=null==(i=null==(r=c.sent())?void 0:r.response)?void 0:null===(a=i.data)||void 0===a?void 0:a.message)?u({knownCard:!1,suggestion:s}):u(null),t([]),o(!1),[3,3];case 3:return[2]}})})()},[e,f]),{synergies:r,loadingSynergies:s,suggestion:l}},P=r(8492);function Synergy(e){var n=e.card,r=(0,m.Z)(n),t=r.loadingStats,a=r.cardImage,i=r.cardBackFaceImage;return(0,s.jsxs)(c.ZP,{alignItems:"center",container:!0,flexDirection:"column",sx:{width:"300px",backgroundColor:"grey.800",marginTop:"-6px",paddingTop:2,paddingBottom:2},children:[(0,s.jsx)(v.Z,{cardBackFaceImage:i,cardImage:a,loading:t}),(0,s.jsx)(P.Z,{card:n})]})}Synergy.propTypes={card:y().string.isRequired};var T=r(7070),E=r(8559);function Synergies(e){var n=hooks_useCardPairings(e.card).synergies,r=(0,i._)((0,d.useState)(6),2),t=r[0],a=r[1],l=(0,d.useCallback)(function(){a(t+6)},[t,a]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{color:"white",sx:{marginTop:4},variant:"h2",children:"Often Drafted With"}),!n.length&&(0,s.jsx)(T.Z,{severity:"info",sx:{marginTop:2},variant:"filled",children:(0,s.jsx)(E.Z,{children:"Not enough data"})}),!!n.length&&(0,s.jsxs)(c.ZP,{alignItems:"center",container:!0,flexDirection:"row",justifyContent:"center",wrap:"wrap",children:[n.slice(0,t).map(function(e){return(0,s.jsx)(Synergy,{card:e.card},e.card)}),(0,s.jsx)(S.Z,{color:"primary",onClick:l,size:"large",variant:"contained",children:"See more"})]})]})}Synergies.propTypes={card:y().string.isRequired};var U=r(5210),O=r(1101),B=r(2135);function RecentDrafts(e){var n=e.drafts,r=(0,O.Z)(),t=(0,B.Z)(r.breakpoints.up("md"));if(!n)return null;var a=n.sort(function(e,n){return e.occurrence<n.occurrence?1:-1});return(0,s.jsxs)(c.ZP,{alignItems:"flex-start",container:!0,direction:"row",children:[(0,s.jsx)(c.ZP,{item:!0,lg:6,md:4,xs:0}),(0,s.jsx)(c.ZP,{container:!0,direction:t?"column":"row",item:!0,justifyContent:"flex-start",lg:6,md:8,xs:12,children:a.filter(function(e){return e.pick}).map(function(e){return(0,s.jsx)(c.ZP,{item:!0,md:12,xs:6,children:(0,s.jsx)(o.Z,{color:"white",sx:{display:"block",textAlign:{xs:"center",md:"left"}},variant:"subtitle1",children:(0,s.jsxs)(U.Z,{color:"primary",href:"https://docs.google.com/spreadsheets/d/1AdrhWkDX7i9p2rZbEKzDs3nQAhCvcH0LAXZQNwWMsnA/edit#gid=".concat(e.gid),target:"_blank",children:[e.draft.replace("VRD Archives - ","").replace(/(\d+)/," $1").replace(/([A-Z]+[a-z]+)/,"$1 ").replace(/\s+/," ").replace(/([A-Z][A-Z][A-Z]+)([a-z]+)/,function(e,n,r){return"".concat(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase().slice(0,-1)," ").concat(n.substr(-1).toUpperCase()).concat(r)}).replace(/([A-Z][A-Z][A-Z]+)/,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}).trim()," â€” Round ",Math.ceil(e.pick/8)]})})},e.gid)})})]})}RecentDrafts.propTypes={drafts:y().arrayOf(y().shape({occurrence:y().string.isRequired,draft:y().string.isRequired,gid:y().string.isRequired,pick:y().number}))};var F=(0,h.Z)(f.Z)({"& label":{color:"white"},"& .MuiInput-underline:before":{borderBottomColor:"white !important"},"& input":{color:"white"}});function Details(){var e=decodeURIComponent((0,Z.useSearchParams)().get("card")),n=(0,i._)((0,d.useState)(!0),2),r=n[0],f=n[1],h=(0,i._)((0,d.useState)(e),2),w=h[0],y=h[1],S=(0,Z.useRouter)();(0,d.useEffect)(function(){return y(e)},[e]);var A=(0,m.Z)(w,!r),R=A.stats,I=A.loadingStats,_=A.cardImage,D=A.cardBackFaceImage,P=A.suggestions,T=(0,d.useCallback)(function(e){e.target.value&&S.replace("/details?card=".concat(encodeURIComponent(e.target.value))),y(e.target.value)},[S,y]),E=(0,d.useCallback)(function(e,n){T({target:{value:n}})},[T]),U=(0,d.useCallback)(function(){T({target:{value:P[0]}})},[T,P]);return(0,s.jsxs)(c.ZP,{alignItems:"center",container:!0,flexDirection:"column",item:!0,sx:{backgroundColor:"grey.800",width:"100%",marginTop:"-6px",paddingTop:2,minHeight:"calc(100vh - 52px)",paddingBottom:2},children:[(0,s.jsx)(j.Z,{children:(0,s.jsx)(b.Z,{control:(0,s.jsx)(k.Z,{checked:!r,color:"secondary",onClick:function(){f(!r)}}),label:(0,s.jsx)(o.Z,{color:"white",children:"Include very old drafts"})})}),(0,s.jsx)(p.Z,{autoHighlight:!0,disableClearable:!0,forcePopupIcon:!1,freeSolo:!0,onChange:E,openOnFocus:!0,options:P||[],renderInput:function(e){return(0,s.jsx)(F,(0,a._)((0,t._)({},e),{InputProps:(0,a._)((0,t._)({},e.InputProps),{endAdornment:(0,s.jsx)(l.Z,{position:"end",sx:{color:"white"},children:(0,s.jsx)(u.Z,{})})}),fullWidth:!0,label:"Search",onChange:T,sx:{margin:"20px"},variant:"standard"}))},selectOnFocus:!0,sx:{width:300},value:w}),P.length>0&&!I&&(0,s.jsx)(g.Z,{onAcceptSuggestion:U,searchText:w,stats:R,suggestion:{knownCard:null==R?void 0:R.numberAvailable,suggestion:P[0]}}),(0,s.jsxs)(c.ZP,{container:!0,flexDirection:"row",item:!0,sx:{marginTop:"20px"},children:[(0,s.jsx)(C.Z,{mdUp:!0,children:(0,s.jsx)(c.ZP,{item:!0,xs:12,children:!!(null==R?void 0:R.numberTaken)&&(0,s.jsx)(x.Z,{averageRound:null==R?void 0:R.averageRound,drafts:null==R?void 0:R.drafts,loading:I,lotusScore:null==R?void 0:R.lotusScore,numberOfDrafts:null==R?void 0:R.numberAvailable,numberTaken:null==R?void 0:R.numberTaken})})}),(0,s.jsx)(C.Z,{mdDown:!0,children:(0,s.jsxs)(c.ZP,{item:!0,md:4,children:[(0,s.jsx)(o.Z,{align:"right",color:"white",variant:"h3",children:"Recent Drafts"}),(0,s.jsx)(RecentDrafts,{drafts:null==R?void 0:R.drafts})]})}),(0,s.jsx)(c.ZP,{container:!0,item:!0,justifyContent:"center",md:4,xs:12,children:(0,s.jsx)(v.Z,{cardBackFaceImage:D,cardImage:_,loading:I})}),(0,s.jsx)(C.Z,{mdDown:!0,children:(0,s.jsx)(c.ZP,{item:!0,md:4,children:!!(null==R?void 0:R.numberTaken)&&(0,s.jsx)(x.Z,{averageRound:null==R?void 0:R.averageRound,drafts:null==R?void 0:R.drafts,loading:I,lotusScore:null==R?void 0:R.lotusScore,numberOfDrafts:null==R?void 0:R.numberAvailable,numberTaken:null==R?void 0:R.numberTaken})})}),(0,s.jsx)(C.Z,{mdUp:!0,children:(0,s.jsxs)(c.ZP,{container:!0,item:!0,justifyContent:"center",xs:12,children:[(0,s.jsx)(o.Z,{color:"white",sx:{marginTop:2},textAlign:"center",variant:"h3",children:"Recent Drafts"}),(0,s.jsx)(RecentDrafts,{drafts:null==R?void 0:R.drafts})]})})]}),(0,s.jsx)(Synergies,{card:w})]})}}},function(e){e.O(0,[2465,9338,3620,1,5643,4182,6628,2023,1264,2971,2472,1744],function(){return e(e.s=4148)}),_N_E=e.O()}]);