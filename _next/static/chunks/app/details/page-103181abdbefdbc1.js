(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5549],{94148:function(e,n,r){Promise.resolve().then(r.bind(r,90804))},90804:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Details}});var t=r(35029),a=r(88965),i=r(24670),s=r(57437),o=r(2265),c=r(43226),l=r(28874),d=r(81679),u=r(58991),g=r(4922),p=r(21975),f=r(29078),m=r(39190),h=r(38305),x=r(57121),v=r(41619),Z=r(24033),j=r(2582),b=r(40182),k=r(27760),C=r(39227),y=r(11805),w=r(74275),S=r.n(w),A=r(49050),R=r(16687),I=r(50044),P=r(98554),_=r(54829),D=r(43628),hooks_useCardPairings=function(e){var n=(0,i._)((0,o.useState)([]),2),r=n[0],t=n[1],a=(0,i._)((0,o.useState)(!1),2),s=a[0],c=a[1],l=(0,i._)((0,o.useState)(null),2),d=l[0],u=l[1],g=(0,o.useCallback)(function(e){return _.Z.get("".concat(D.v.API_SYNERGIES_URL).replace("{CARD_NAME}",encodeURIComponent(e)))},[]),p=(0,o.useMemo)(function(){return(0,P.Z)(g,300)},[g]);return(0,o.useEffect)(function(){(0,R._)(function(){var n,r,a,i,s;return(0,I.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,p(e.trim())];case 1:return n=o.sent().data,c(!0),n.statusCode?(t([]),u({knownCard:!0,suggestion:n.suggestion})):(t(n),u(null)),c(!1),[3,3];case 2:return(s=null==(i=null==(r=o.sent())?void 0:r.response)?void 0:null===(a=i.data)||void 0===a?void 0:a.message)?u({knownCard:!1,suggestion:s}):u(null),t([]),c(!1),[3,3];case 3:return[2]}})})()},[e,p]),{synergies:r,loadingSynergies:s,suggestion:d}},T=r(8492);function Synergy(e){var n=e.card,r=(0,h.Z)(n),t=r.loadingStats,a=r.cardImage,i=r.cardBackFaceImage;return(0,s.jsxs)(l.ZP,{alignItems:"center",container:!0,flexDirection:"column",sx:{width:"300px",backgroundColor:"grey.800",marginTop:"-6px",paddingTop:2,paddingBottom:2},children:[(0,s.jsx)(v.Z,{cardBackFaceImage:i,cardImage:a,loading:t}),(0,s.jsx)(T.Z,{card:n})]})}Synergy.propTypes={card:S().string.isRequired};var E=r(67070),O=r(18559);function Synergies(e){var n=e.card,r=hooks_useCardPairings(n).synergies,t=(0,i._)((0,o.useState)(6),2),a=t[0],d=t[1];(0,o.useEffect)(function(){d(6)},[n]);var u=(0,o.useCallback)(function(){d(a+6)},[a,d]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{color:"white",sx:{marginTop:4},variant:"h2",children:"Often Drafted With"}),!r.length&&(0,s.jsx)(E.Z,{severity:"info",sx:{marginTop:2},variant:"filled",children:(0,s.jsx)(O.Z,{children:"Not enough data"})}),!!r.length&&(0,s.jsxs)(l.ZP,{alignItems:"center",container:!0,flexDirection:"row",justifyContent:"center",wrap:"wrap",children:[r.slice(0,a).map(function(e){return(0,s.jsx)(Synergy,{card:e.card},e.card)}),(0,s.jsx)(A.Z,{color:"primary",onClick:u,size:"large",variant:"contained",children:"See more"})]})]})}Synergies.propTypes={card:S().string.isRequired};var U=r(25210),B=r(41101),F=r(22135);function RecentDrafts(e){var n=e.drafts,r=(0,B.Z)(),t=(0,F.Z)(r.breakpoints.up("md"));if(!n)return null;var a=n.sort(function(e,n){return e.occurrence<n.occurrence?1:-1});return(0,s.jsxs)(l.ZP,{alignItems:"flex-start",container:!0,direction:"row",children:[(0,s.jsx)(l.ZP,{item:!0,lg:6,md:4,xs:0}),(0,s.jsx)(l.ZP,{container:!0,direction:t?"column":"row",item:!0,justifyContent:"flex-start",lg:6,md:8,xs:12,children:a.filter(function(e){return e.pick}).map(function(e){return(0,s.jsx)(l.ZP,{item:!0,md:12,xs:6,children:(0,s.jsx)(c.Z,{color:"white",sx:{display:"block",textAlign:{xs:"center",md:"left"}},variant:"subtitle1",children:(0,s.jsxs)(U.Z,{color:"primary",href:"https://docs.google.com/spreadsheets/d/1AdrhWkDX7i9p2rZbEKzDs3nQAhCvcH0LAXZQNwWMsnA/edit#gid=".concat(e.gid),target:"_blank",children:[e.draft.replace("VRD Archives - ","").replace(/(\d+)/," $1").replace(/([A-Z]+[a-z]+)/,"$1 ").replace(/\s+/," ").replace(/([A-Z][A-Z][A-Z]+)([a-z]+)/,function(e,n,r){return"".concat(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase().slice(0,-1)," ").concat(n.substr(-1).toUpperCase()).concat(r)}).replace(/([A-Z][A-Z][A-Z]+)/,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}).trim()," â€” Round ",Math.ceil(e.pick/8)]})})},e.gid)})})]})}RecentDrafts.propTypes={drafts:S().arrayOf(S().shape({occurrence:S().string.isRequired,draft:S().string.isRequired,gid:S().string.isRequired,pick:S().number}))};var N=(0,m.Z)(p.Z)({"& label":{color:"white"},"& .MuiInput-underline:before":{borderBottomColor:"white !important"},"& input":{color:"white"}});function Details(){var e=decodeURIComponent((0,Z.useSearchParams)().get("card")),n=(0,i._)((0,o.useState)(!0),2),r=n[0],p=n[1],m=(0,i._)((0,o.useState)(e),2),w=m[0],S=m[1],A=(0,Z.useRouter)();(0,o.useEffect)(function(){S(e),document.title="St Lotus | "+e},[e]);var R=(0,h.Z)(w,!r),I=R.stats,P=R.loadingStats,_=R.cardImage,D=R.cardBackFaceImage,T=R.suggestions,E=(0,o.useCallback)(function(e){e.target.value&&A.replace("/details?card=".concat(encodeURIComponent(e.target.value))),S(e.target.value)},[A,S]),O=(0,o.useCallback)(function(e,n){E({target:{value:n}})},[E]),U=(0,o.useCallback)(function(){E({target:{value:T[0]}})},[E,T]);return(0,s.jsxs)(l.ZP,{alignItems:"center",container:!0,flexDirection:"column",item:!0,sx:{backgroundColor:"grey.800",width:"100%",marginTop:"-6px",paddingTop:2,minHeight:"calc(100vh - 52px)",paddingBottom:2},children:[(0,s.jsx)(j.Z,{children:(0,s.jsx)(b.Z,{control:(0,s.jsx)(k.Z,{checked:!r,color:"secondary",onClick:function(){p(!r)}}),label:(0,s.jsx)(c.Z,{color:"white",children:"Include very old drafts"})})}),(0,s.jsx)(f.Z,{autoHighlight:!0,disableClearable:!0,forcePopupIcon:!1,freeSolo:!0,onChange:O,openOnFocus:!0,options:T||[],renderOption:function(e,n,r,i){return(0,o.createElement)(C.Z,(0,a._)((0,t._)({component:"li"},e),{key:n}),i.getOptionLabel(n))},renderInput:function(e){return(0,s.jsx)(N,{inputProps:e.inputProps,size:e.size,id:e.id,disabled:e.disabled,InputProps:(0,a._)((0,t._)({},e.InputProps),{endAdornment:(0,s.jsx)(d.Z,{position:"end",sx:{color:"white"},children:(0,s.jsx)(u.Z,{})})}),fullWidth:!0,label:"Search",onChange:E,sx:{margin:"20px"},variant:"standard"})},selectOnFocus:!0,sx:{width:300},value:w}),T.length>0&&!P&&(0,s.jsx)(g.Z,{onAcceptSuggestion:U,searchText:w,stats:I,suggestion:{knownCard:null==I?void 0:I.numberAvailable,suggestion:T[0]}}),(0,s.jsxs)(l.ZP,{container:!0,flexDirection:"row",item:!0,sx:{marginTop:"20px"},children:[(0,s.jsx)(y.Z,{mdUp:!0,children:(0,s.jsx)(l.ZP,{item:!0,xs:12,children:!!(null==I?void 0:I.numberTaken)&&(0,s.jsx)(x.Z,{averageRound:null==I?void 0:I.averageRound,drafts:null==I?void 0:I.drafts,loading:P,lotusScore:null==I?void 0:I.lotusScore,numberOfDrafts:null==I?void 0:I.numberAvailable,numberTaken:null==I?void 0:I.numberTaken})})}),(0,s.jsx)(y.Z,{mdDown:!0,children:(0,s.jsxs)(l.ZP,{item:!0,md:4,children:[(null==I?void 0:I.drafts)&&(0,s.jsx)(c.Z,{align:"right",color:"white",variant:"h3",children:"Recent Drafts"}),(0,s.jsx)(RecentDrafts,{drafts:null==I?void 0:I.drafts})]})}),(0,s.jsx)(l.ZP,{container:!0,item:!0,justifyContent:"center",md:4,xs:12,children:(0,s.jsx)(v.Z,{cardBackFaceImage:D,cardImage:_,loading:P})}),(0,s.jsx)(y.Z,{mdDown:!0,children:(0,s.jsx)(l.ZP,{item:!0,md:4,children:!!(null==I?void 0:I.numberTaken)&&(0,s.jsx)(x.Z,{averageRound:null==I?void 0:I.averageRound,drafts:null==I?void 0:I.drafts,loading:P,lotusScore:null==I?void 0:I.lotusScore,numberOfDrafts:null==I?void 0:I.numberAvailable,numberTaken:null==I?void 0:I.numberTaken})})}),(0,s.jsx)(y.Z,{mdUp:!0,children:(0,s.jsxs)(l.ZP,{container:!0,item:!0,justifyContent:"center",xs:12,children:[(null==I?void 0:I.drafts)&&(0,s.jsx)(c.Z,{color:"white",sx:{marginTop:2},textAlign:"center",variant:"h3",children:"Recent Drafts"}),(0,s.jsx)(RecentDrafts,{drafts:null==I?void 0:I.drafts})]})})]}),(0,s.jsx)(Synergies,{card:w})]})}}},function(e){e.O(0,[2465,9338,3620,2726,940,5848,9697,2049,7878,2023,1264,2971,2472,1744],function(){return e(e.s=94148)}),_N_E=e.O()}]);