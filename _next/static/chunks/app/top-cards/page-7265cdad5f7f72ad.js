(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6104],{61193:function(e,t,r){Promise.resolve().then(r.bind(r,13483))},13483:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return TopCards}});var n=r(24670),a=r(1801),s=r(57437),i=r(2265),c=r(43226),o=r(88938),l=r(28702),u=r(28874),d=r(16687),f=r(50044),p=r(29222),h=r(43628),hooks_useTopCardStats=function(){var e=(0,n._)((0,i.useState)([]),2),t=e[0],r=e[1],a=(0,n._)((0,i.useState)(!1),2),s=a[0],c=a[1],o=(0,i.useCallback)(function(){return p.Z.get(h.v.API_TOP_CARDS_URL)},[]);return(0,i.useEffect)(function(){(0,d._)(function(){return(0,f.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),c(!0),[4,o()];case 1:return r(e.sent().data),[3,3];case 2:return e.sent(),r([]),c(!1),[3,3];case 3:return[2]}})})()},[o]),{stats:t,loading:s}},m=r(86840),g=r(74275),v=r.n(g),x=r(39190),hooks_useCardImage=function(e){var t=(0,n._)((0,i.useState)(!1),2),r=t[0],a=t[1],s=(0,n._)((0,i.useState)("https://c1.scryfall.com/file/scryfall-cards/normal/front/b/3/b3a69a1c-c80f-4413-a6fd-ae54cabbce28.jpg?1559591595"),2),c=s[0],o=s[1],l=(0,n._)((0,i.useState)(null),2),u=l[0],h=l[1];return(0,i.useEffect)(function(){(0,d._)(function(){return(0,f.Jh)(this,function(t){try{a(!0),p.Z.get("https://api.scryfall.com/cards/named?fuzzy=".concat(encodeURIComponent(e))).then(function(e){var t,r,n,s,i,c=e.data;h(null);var l="https://c1.scryfall.com/file/scryfall-cards/normal/front/5/8/5865603c-0a5e-45c3-84e3-2dc3b4cf0cf7.jpg?1562915786";(null==c?void 0:c.image_uris)?l=null==c?void 0:null===(t=c.image_uris)||void 0===t?void 0:t.normal:(null==c?void 0:c.card_faces)&&(l=null==c?void 0:null===(n=c.card_faces[0])||void 0===n?void 0:null===(r=n.image_uris)||void 0===r?void 0:r.normal,(null==c?void 0:c.card_faces.length)>1&&h(null==c?void 0:null===(i=c.card_faces[1])||void 0===i?void 0:null===(s=i.image_uris)||void 0===s?void 0:s.normal)),o(l),a(!1)})}catch(e){o("https://c1.scryfall.com/file/scryfall-cards/normal/front/b/3/b3a69a1c-c80f-4413-a6fd-ae54cabbce28.jpg?1559591595"),a(!1)}return[2]})})()},[e]),{loadingImage:r,cardImage:c,cardBackFaceImage:u}},b=r(22135),_=r(40182),k=r(27760),C=r(61396),Z=r.n(C),j=r(41101),y=(0,x.Z)(c.Z)(function(){return{whiteSpace:"nowrap",display:"inline-block"}}),S=(0,x.Z)(u.ZP)(function(e){var t=e.theme;return(0,m._)({maxWidth:"199px"},t.breakpoints.up("sm"),{maxWidth:"260px"})}),w=(0,x.Z)(u.ZP)({position:"relative","&:hover .text-overlay":{display:"flex"}}),R=(0,x.Z)(u.ZP)(function(e){return{display:"none",color:e.theme.palette.primary.main,backgroundColor:"rgba(0,0,0,0.3)",alignItems:"center",justifyContent:"center",position:"absolute",margin:"auto",width:"100%",height:"calc(100% - 6px)",top:0,borderRadius:"10px"}}),I=(0,x.Z)("img")({maxWidth:"100%"});function TopCard(e){var t=e.name,r=e.overallPick,n=e.averageRound,a=e.numberTaken,o=e.numberAvailable,l=e.onSelect,d=hooks_useCardImage(t),f=d.loadingImage,p=d.cardImage,h=(0,j.Z)(),m=(0,b.Z)(h.breakpoints.up("sm")),g=(0,i.useCallback)(function(){l(t)},[t,l]);return f?null:(0,s.jsxs)(S,{item:!0,children:[(0,s.jsx)(c.Z,{noWrap:!0,variant:"h5",children:(0,s.jsx)(Z(),{rel:"noopener noreferrer",target:"_blank",href:"/details?card=".concat(t),children:t.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})})}),(0,s.jsxs)(w,{children:[(0,s.jsx)(I,{alt:"".concat(t," magic card"),src:p}),(0,s.jsx)(R,{className:"text-overlay",children:(0,s.jsx)(c.Z,{component:"span",variant:"h1",children:r})})]}),(0,s.jsxs)(u.ZP,{container:!0,flexDirection:"row",children:[(0,s.jsx)(u.ZP,{container:!0,item:!0,sm:8,sx:{paddingLeft:2},xs:12,children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{color:"text.secondary",variant:"subtitle1",children:"Picked ".concat(a," of ").concat(o," drafts")}),(0,s.jsx)(y,{color:"text.secondary",variant:"subtitle1",children:"Average pick round ".concat(n)})]}):(0,s.jsx)(c.Z,{color:"text.secondary",variant:"subtitle1",children:"Unpicked"})}),(0,s.jsx)(u.ZP,{item:!0,sm:4,xs:12,children:(0,s.jsx)(_.Z,{control:(0,s.jsx)(k.Z,{onClick:g}),label:"Filter",labelPlacement:m?"top":"start"})})]})]},t)}TopCard.propTypes={name:v().string.isRequired,overallPick:v().number.isRequired,averageRound:v().number.isRequired,numberTaken:v().number.isRequired,numberAvailable:v().number.isRequired,onSelect:v().func.isRequired};var P=r(49050),A=r(21975),T=r(47827),E=r(29872),D=r(28922),hooks_useDraftCsv=function(e){var t=(0,n._)((0,i.useState)(!1),2),r=t[0],s=t[1],c=(0,n._)((0,i.useState)([]),2),o=c[0],l=c[1],u=(0,i.useCallback)((0,d._)(function(){var t;return(0,f.Jh)(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),!e)return l([]),s(!1),[2];return s(!0),[4,p.Z.get(e)];case 1:return t=r.sent().data,l((0,D.Q)(t,{columns:!0,skip_empty_lines:!0}).filter(function(e){return e&&e[""]&&e[""].match(/\d+/)}).reduce(function(e,t){return(0,a._)(e).concat((0,a._)(Object.entries(t).map(function(e){var t=(0,n._)(e,2),r=t[0],a=t[1];return r&&a?a.toLowerCase():""}).filter(function(e){return e})))},[])),s(!1),[3,3];case 2:return r.sent(),s(!1),l([]),[3,3];case 3:return[2]}})}),[e]);return(0,i.useEffect)(function(){u();var e=setInterval(function(){u()},5e3);return function(){return clearInterval(e)}},[u,e]),{loading:r,picks:o}},N="top-cards-selections",W=(0,x.Z)("li")(function(e){return{margin:e.theme.spacing(.5)}});function TopCards(){var e=hooks_useTopCardStats().stats,t=(0,n._)((0,i.useState)([]),2),r=t[0],d=t[1],f=(0,n._)((0,i.useState)(""),2),p=f[0],h=f[1];(0,i.useEffect)(function(){d(JSON.parse(window.localStorage.getItem(N))||[])},[]);var m=(0,i.useCallback)(function(){d([]),window.localStorage.removeItem(N)},[]),g=(0,i.useCallback)(function(e){var t=(0,a._)(r).concat([e]);d(t),window.localStorage.setItem(N,JSON.stringify(t))},[r]),v=(0,i.useCallback)(function(e){var t=r.filter(function(t){return t!==e});d(t),window.localStorage.setItem(N,JSON.stringify(t))},[r]),x=hooks_useDraftCsv(function(e){if(!e)return"";var t=e.trim(),r=RegExp("https://docs.google.com/spreadsheets/d/(.*)/edit").exec(t);if(!r||!r[1])return"";var n=r[1],a="https://docs.google.com/spreadsheets/d/".concat(n,"/export?format=csv"),s=t.split("#gid=")[1];return s?a+"&gid=".concat(s):a}(p)).picks;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Z,{maxWidth:"lg",sx:{marginBottom:6},children:[(0,s.jsx)(l.Z,{component:"h1",sx:{marginTop:10},variant:"h2",children:"Top VRD Cards"}),(0,s.jsx)(c.Z,{paragraph:!0,children:"These are the current cards in the order theyâ€™re drafted. Every draft will be different, but this is the aggregate rating of the cards"}),r.length>0&&(0,s.jsxs)(E.Z,{component:"ul",sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyle:"none",p:.5,m:0,maxWidth:"600px",height:"60px",overflow:"auto"},children:[(0,s.jsx)(P.Z,{onClick:m,sx:{maxHeight:"36px"},variant:"contained",children:"Clear all"}),r.map(function(e){return(0,s.jsx)(W,{children:(0,s.jsx)(T.Z,{label:e,onDelete:function(){return v(e)}})},e)})]}),(0,s.jsx)(A.Z,{sx:{mt:1},fullWidth:!0,label:"Draft link to follow",variant:"standard",helperText:"Example: https://docs.google.com/spreadsheets/d/1AdrhWkDX7i9p2rZbEKzDs3nQAhCvcH0LAXZQNwWMsnA/edit#gid=1008615612",onChange:function(e){return h(e.target.value)}})]}),(0,s.jsx)(u.ZP,{container:!0,justifyContent:"space-around",children:e.filter(function(e){return!x.includes(e.card)&&!r.includes(e.card)}).slice(0,100).map(function(e){return(0,s.jsx)(TopCard,{averageRound:e.averageRound,name:e.card,numberAvailable:e.numberAvailable,numberTaken:e.numberTaken,onSelect:g,overallPick:e.overallPick+1},e.card)})})]})}},28702:function(e,t,r){"use strict";var n=r(43226),a=(0,r(39190).Z)(n.Z)(function(e){return{marginBottom:e.theme.spacing(2)}});t.Z=a},43628:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var n={API_CARD_URL:"https://api.stlotus.org:444/cards/",API_SYNERGIES_URL:"https://api.stlotus.org:444/cards/{CARD_NAME}/synergies",API_TOP_CARDS_URL:"https://api.stlotus.org:444/best-cards",API_DECK_URL:"https://api.stlotus.org:444/cards"}}},function(e){e.O(0,[2465,9338,3620,2726,940,4932,1396,8417,5457,3172,2971,2472,1744],function(){return e(e.s=61193)}),_N_E=e.O()}]);