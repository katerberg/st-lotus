(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6104],{61193:function(e,t,r){Promise.resolve().then(r.bind(r,13483))},13483:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return TopCards}});var n=r(24670),a=r(57437),c=r(2265),o=r(43226),s=r(88938),i=r(28702),u=r(28874),l=r(16687),d=r(50044),f=r(54829),h=r(43628),hooks_useTopCardStats=function(e){var t=(0,n._)((0,c.useState)([]),2),r=t[0],a=t[1],o=(0,n._)((0,c.useState)(!1),2),s=o[0],i=o[1],u=(0,c.useCallback)(function(){return f.Z.get("".concat(h.v.API_TOP_CARDS_URL).concat(e.length?"?".concat(e.reduce(function(e,t){return"".concat(e,"colorAnd=").concat(t,"&")},"")):""))},[e]);return(0,c.useEffect)(function(){(0,l._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),i(!0),[4,u()];case 1:return a(e.sent().data),[3,3];case 2:return e.sent(),a([]),i(!1),[3,3];case 3:return[2]}})})()},[u]),{stats:r,loading:s}},p=r(86840),m=r(74275),g=r.n(m),v=r(39190),hooks_useCardImage=function(e){var t=(0,n._)((0,c.useState)(!1),2),r=t[0],a=t[1],o=(0,n._)((0,c.useState)("https://c1.scryfall.com/file/scryfall-cards/normal/front/b/3/b3a69a1c-c80f-4413-a6fd-ae54cabbce28.jpg?1559591595"),2),s=o[0],i=o[1],u=(0,n._)((0,c.useState)(null),2),h=u[0],p=u[1];return(0,c.useEffect)(function(){(0,l._)(function(){return(0,d.Jh)(this,function(t){try{a(!0),f.Z.get("https://api.scryfall.com/cards/named?fuzzy=".concat(encodeURIComponent(e))).then(function(e){var t,r,n,c,o,s=e.data;p(null);var u="https://c1.scryfall.com/file/scryfall-cards/normal/front/5/8/5865603c-0a5e-45c3-84e3-2dc3b4cf0cf7.jpg?1562915786";(null==s?void 0:s.image_uris)?u=null==s?void 0:null===(t=s.image_uris)||void 0===t?void 0:t.normal:(null==s?void 0:s.card_faces)&&(u=null==s?void 0:null===(n=s.card_faces[0])||void 0===n?void 0:null===(r=n.image_uris)||void 0===r?void 0:r.normal,(null==s?void 0:s.card_faces.length)>1&&p(null==s?void 0:null===(o=s.card_faces[1])||void 0===o?void 0:null===(c=o.image_uris)||void 0===c?void 0:c.normal)),i(u),a(!1)})}catch(e){i("https://c1.scryfall.com/file/scryfall-cards/normal/front/b/3/b3a69a1c-c80f-4413-a6fd-ae54cabbce28.jpg?1559591595"),a(!1)}return[2]})})()},[e]),{loadingImage:r,cardImage:s,cardBackFaceImage:h}},b=r(61396),_=r.n(b),x=r(1801),k=(0,v.Z)(o.Z)(function(){return{whiteSpace:"nowrap",display:"inline-block"}}),y=(0,v.Z)(u.ZP)(function(e){var t=e.theme;return(0,p._)({maxWidth:"199px"},t.breakpoints.up("sm"),{maxWidth:"260px"})}),C=(0,v.Z)(u.ZP)({position:"relative","&:hover .text-overlay":{display:"flex"}}),j=(0,v.Z)(u.ZP)(function(e){return{display:"none",color:e.theme.palette.primary.main,backgroundColor:"rgba(0,0,0,0.3)",alignItems:"center",justifyContent:"center",position:"absolute",margin:"auto",width:"100%",height:"calc(100% - 6px)",top:0,borderRadius:"10px"}}),Z=(0,v.Z)("img")({maxWidth:"100%"});function TopCard(e){var t=e.name,r=e.overallPick,n=e.averageRound,c=e.numberTaken,s=e.numberAvailable,i=hooks_useCardImage(t),l=i.loadingImage,d=i.cardImage;return l?null:(0,a.jsxs)(y,{item:!0,children:[(0,a.jsxs)(_(),{rel:"noopener noreferrer",target:"_blank",href:"/details?card=".concat(t),children:[(0,a.jsx)(o.Z,{noWrap:!0,variant:"h5",children:t.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}),(0,a.jsxs)(C,{children:[(0,a.jsx)(Z,{alt:"".concat(t," magic card"),src:d}),(0,a.jsx)(j,{className:"text-overlay",children:(0,a.jsx)(o.Z,{component:"span",variant:"h1",children:r})})]})]}),(0,a.jsx)(u.ZP,{container:!0,flexDirection:"row",children:(0,a.jsx)(u.ZP,{container:!0,item:!0,sx:{paddingLeft:2},xs:12,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{color:"text.secondary",variant:"subtitle1",children:"Picked ".concat(c," of ").concat(s," drafts")}),(0,a.jsx)(k,{color:"text.secondary",variant:"subtitle1",children:"Average pick round ".concat(n)})]}):(0,a.jsx)(o.Z,{color:"text.secondary",variant:"subtitle1",children:"Unpicked"})})})]},t)}TopCard.propTypes={name:g().string.isRequired,overallPick:g().number.isRequired,averageRound:g().number.isRequired,numberTaken:g().number.isRequired,numberAvailable:g().number.isRequired};var R=r(21975),A=r(28922),hooks_useDraftCsv=function(e){var t=(0,n._)((0,c.useState)(!1),2),r=t[0],a=t[1],o=(0,n._)((0,c.useState)([]),2),s=o[0],i=o[1],u=(0,c.useCallback)((0,l._)(function(){var t;return(0,d.Jh)(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),!e)return i([]),a(!1),[2];return a(!0),[4,f.Z.get(e)];case 1:return t=r.sent().data,i((0,A.Q)(t,{columns:!0,skip_empty_lines:!0}).filter(function(e){return e&&(""===e[""]||e[""].match(/\d+/))}).reduce(function(e,t){return(0,x._)(e).concat((0,x._)(Object.entries(t).map(function(e){var t=(0,n._)(e,2),r=t[0],a=t[1];return r&&a?a.toLowerCase():""}).filter(function(e){return e})))},[])),a(!1),[3,3];case 2:return r.sent(),a(!1),i([]),[3,3];case 3:return[2]}})}),[e]);return(0,c.useEffect)(function(){u();var e=setInterval(function(){u()},5e3);return function(){return clearInterval(e)}},[u,e]),{loading:r,picks:s}},P=r(24033);function TopCards(){var e=(0,P.useSearchParams)(),t=hooks_useTopCardStats((0,c.useMemo)(function(){return e.getAll("color")},[e])).stats,r=(0,n._)((0,c.useState)(""),2),l=r[0],d=r[1],f=hooks_useDraftCsv(function(e){if(!e)return"";var t=e.trim(),r=RegExp("https://docs.google.com/spreadsheets/d/(.*)/edit").exec(t);if(!r||!r[1])return"";var n=r[1],a="https://docs.google.com/spreadsheets/d/".concat(n,"/export?format=csv"),c=t.split("#gid=")[1];return c?a+"&gid=".concat(c):a}(l)).picks,h=(0,c.useCallback)(function(e){return!f.some(function(t){return t===e||(null==e?void 0:e.match(RegExp("^"+t+" //","i")))})},[f]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Z,{maxWidth:"lg",sx:{marginBottom:6},children:[(0,a.jsx)(i.Z,{component:"h1",sx:{marginTop:10},variant:"h2",children:"Top VRD Cards"}),(0,a.jsx)(o.Z,{paragraph:!0,children:"These are the current cards in the order theyâ€™re drafted. Every draft will be different, but this is the aggregate rating of the cards."}),(0,a.jsx)(o.Z,{paragraph:!0,children:"If you are participating in a draft, you can provide your draft URL and have this page track which cards have not yet been taken, or just select the cards as they are picked to filter them out."}),(0,a.jsx)(R.Z,{sx:{mt:1},fullWidth:!0,label:"Draft link to follow",variant:"standard",helperText:"Example: https://docs.google.com/spreadsheets/d/1AdrhWkDX7i9p2rZbEKzDs3nQAhCvcH0LAXZQNwWMsnA/edit#gid=1008615612",onChange:function(e){return d(e.target.value)}})]}),(0,a.jsx)(u.ZP,{container:!0,justifyContent:"space-around",children:t.filter(function(e){return h(e.card)}).slice(0,100).map(function(e){return(0,a.jsx)(TopCard,{averageRound:e.averageRound,name:e.card,numberAvailable:e.numberAvailable,numberTaken:e.numberTaken,overallPick:e.overallPick+1},e.card)})})]})}},28702:function(e,t,r){"use strict";var n=r(43226),a=(0,r(39190).Z)(n.Z)(function(e){return{marginBottom:e.theme.spacing(2)}});t.Z=a},43628:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var n={API_CARD_URL:"https://api.stlotus.org:444/cards/",API_SYNERGIES_URL:"https://api.stlotus.org:444/cards/{CARD_NAME}/synergies",API_TOP_CARDS_URL:"https://api.stlotus.org:444/best-cards",API_DECK_URL:"https://api.stlotus.org:444/cards"}}},function(e){e.O(0,[2465,7237,9699,2726,940,5848,1396,5504,2971,2472,1744],function(){return e(e.s=61193)}),_N_E=e.O()}]);